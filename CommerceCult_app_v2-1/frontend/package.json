{
  "version": 2,
  "builds": [
    { "src": "frontend/package.json", "use": "@vercel/next" },
    { "src": "backend/server.js", "use": "@vercel/node" }
  ],
  "routes": [
    { "src": "/api/(.*)", "dest": "backend/server.js" },
    { "src": "/(.*)", "dest": "frontend/$1" }
  ]
}
ğŸ”¥ Perfect â€” since your backend is Node.js, we can make this seamless and fast.
Hereâ€™s exactly what to do â€” just 3 quick steps and youâ€™ll have your backend running under the same domain on Vercel.


---

âš™ï¸ STEP 1 â€” Create vercel.json (in your repo root)

Go to the root of your commerce2 repo and create a new file named vercel.json with this exact content:

{
  "version": 2,
  "builds": [
    { "src": "frontend/package.json", "use": "@vercel/next" },
    { "src": "backend/server.js", "use": "@vercel/node" }
  ],
  "routes": [
    { "src": "/api/(.*)", "dest": "backend/server.js" },
    { "src": "/(.*)", "dest": "frontend/$1" }
  ]
}

ğŸ“˜ What this does:

Builds your Next.js frontend from /frontend

Deploys your Node.js backend from /backend/server.js

Routes all /api/... requests to your backend

Routes everything else to your frontend



---

âš™ï¸ STEP 2 â€” Make sure backend entry file is named correctly

In your backend folder, you should have something like:

commerce2/
â””â”€â”€ backend/
    â”œâ”€â”€ server.js
    â”œâ”€â”€ package.json
    â””â”€â”€ routes/

Your server.js should export a handler for Vercel like this:

const express = require("express");
const app = express();

// Example route
app.get("/api/hello", (req, res) => {
  res.json({ message: "Backend connected successfully!" });
});

// Export as handler for Vercel
module.exports = app;

> âš ï¸ Vercel doesnâ€™t â€œlistenâ€ on a port like a normal Express app. You export your Express app instead of calling app.listen().



If your server currently uses app.listen(port), remove that line.


---

ğŸ§© STEP 3 â€” Commit and Push

In your terminal:

git add vercel.json
git commit -m "Add backend connection config for Vercel"
git push origin main


---

ğŸš€ STEP 4 â€” Redeploy

Go to your Vercel dashboard â†’ commerce2 project â†’ Deploy
Vercel will automatically detect the new config and rebuild both frontend + backend.


---

âœ… STEP 5 â€” Test Your Backend

After the deploy finishes: Visit
ğŸ‘‰ https://your-app-name.vercel.app/api/hello

If you see:

{ "message": "Backend connected successfully!" }

ğŸ‰ Youâ€™re live â€” frontend + backend are now served from one domain.


---


If youâ€™d like, I can also give you the correct Express server.js template formatted for Vercel (production-safe, supports routes, CORS, JSON, etc.) â€” want me to drop that in next?